<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js" crossorigin="anonymous"></script>
<script type="text/javascript">
    window.onload = function () {
        document.querySelectorAll("script[type='math/tex; mode=display']")
            .forEach(function (elem) {
                try {
                    var tex = elem.innerText.replace(/%.*/g, '');
                    elem.outerHTML = katex.renderToString(tex, { displayMode: true });
                } catch (e) { console.log("Invalid LaTeX. Skipping."); console.error(e) }
            });
        document.querySelectorAll("script[type='math/tex']")
            .forEach(function (elem) {
                try {
                    var tex = elem.innerText.replace(/%.*/g, '');
                    elem.outerHTML = katex.renderToString(tex, { displayMode: false });
                } catch (e) { console.log("Invalid LaTeX. Skipping."); console.error(e) }
            });
    }
</script>